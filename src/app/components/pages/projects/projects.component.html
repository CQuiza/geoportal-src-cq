<br><br><br><br>

<div class="container">
  <div class="button-group">
    <button mat-raised-button color="primary" (click)="showForm('owners')">Owners Register</button>
    <button mat-raised-button color="accent" (click)="showForm('parcels')">Parcels</button>
  </div>

  <!-- Formulario de Login -->
  @if (selectedForm === 'owners') {
    <form [formGroup]="ownersForm" (ngSubmit)="onOwnersSubmit()" class="form">
      <mat-form-field appearance="fill">
        <mat-label>Name</mat-label>
        <input matInput formControlName="ownerName" placeholder="Cristhian Quiza" type="ownerName">
      </mat-form-field>

      <mat-form-field appearance="fill">
        <mat-label>Last Name</mat-label>
        <input matInput formControlName="ownerLastName" placeholder="Quiza Neuto" type="ownerLastName">
      </mat-form-field>

      <mat-form-field appearance="fill">
        <mat-label>Email</mat-label>
        <input matInput formControlName="ownerEmail" placeholder="crtquiza@gmail.com" type="email">
      </mat-form-field>

      <mat-form-field appearance="fill">
        <mat-label>Phone Number</mat-label>
        <input matInput formControlName="ownerPhone" placeholder="637775246782" type="number">
      </mat-form-field>

      <mat-form-field appearance="fill">
        <mat-label>Description</mat-label>
        <input matInput formControlName="ownerDescription" placeholder="predial problem" type="ownerDescription">
      </mat-form-field>

      <mat-form-field appearance="fill">
        <mat-label>Task</mat-label>
        <input matInput formControlName="ownerTask" placeholder="Task to do" type="ownerTask">
      </mat-form-field>

      <mat-form-field appearance="fill">
        <mat-label class="form-label">Done</mat-label>
        <input matInput formControlName="ownerDone" placeholder="True or False" type="ownerDone">
      </mat-form-field>


      <button mat-raised-button color="primary" type="submit">Save</button>
    </form>

    <section>
      <div>

        <table mat-table [dataSource]="dataSource" class="mat-elevation-z8">

          <!--- Note that these columns can be defined in any order.
                The actual rendered columns are set as a property on the row definition" -->

          <!-- Position Column -->
          <ng-container matColumnDef="id">
            <th mat-header-cell *matHeaderCellDef> Id </th>
            <td mat-cell *matCellDef="let element"> {{element.id}} </td>
          </ng-container>

          <!-- Name Column -->
          <ng-container matColumnDef="name">
            <th mat-header-cell *matHeaderCellDef> Name </th>
            <td mat-cell *matCellDef="let element"> {{element.name}} </td>
          </ng-container>

          <!-- Weight Column -->
          <ng-container matColumnDef="lastName">
            <th mat-header-cell *matHeaderCellDef> Last Name </th>
            <td mat-cell *matCellDef="let element"> {{element.lastName}} </td>
          </ng-container>

          <ng-container matColumnDef="email">
            <th mat-header-cell *matHeaderCellDef> E-mail </th>
            <td mat-cell *matCellDef="let element"> {{element.email}} </td>
          </ng-container>

          <ng-container matColumnDef="phone">
            <th mat-header-cell *matHeaderCellDef> Phone </th>
            <td mat-cell *matCellDef="let element"> {{element.phone}} </td>
          </ng-container>

          <ng-container matColumnDef="description">
            <th mat-header-cell *matHeaderCellDef> Description </th>
            <td mat-cell *matCellDef="let element"> {{element.description}} </td>
          </ng-container>

          <ng-container matColumnDef="task">
            <th mat-header-cell *matHeaderCellDef> Task </th>
            <td mat-cell *matCellDef="let element"> {{element.task}} </td>
          </ng-container>

          <ng-container matColumnDef="done">
            <th mat-header-cell *matHeaderCellDef> Done </th>
            <td mat-cell *matCellDef="let element"> {{element.done}} </td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        </table>



      </div>
    </section>
  }

  <!-- Formulario de Registro -->
  @if (selectedForm === 'parcels') {
    <form [formGroup]="parcelForm" (ngSubmit)="onParcelSubmit()" class="form">
      <mat-form-field appearance="fill">
        <mat-label>Code</mat-label>
        <input matInput formControlName="parcelCode" placeholder='89776'>
      </mat-form-field>

      <mat-form-field appearance="fill">
        <mat-label>Municipality</mat-label>
        <input matInput formControlName="parcelMunicipality" placeholder="41" type="deptoId">
      </mat-form-field>

      <mat-form-field appearance="fill">
        <mat-label>Owner</mat-label>
        <input matInput formControlName="parcelOwner" placeholder="" type="deptoNumMpios">
      </mat-form-field>

      <mat-form-field appearance="fill">
        <mat-label>Geom WKT</mat-label>
        <input matInput formControlName="parcelGeom" placeholder="" type="parcelGeom">
      </mat-form-field>

      <mat-form-field appearance="fill">
        <mat-label>Area</mat-label>
        <input matInput formControlName="parcelArea" placeholder="" type="parcelArea">
      </mat-form-field>

      <mat-form-field appearance="fill">
        <mat-label>Land Use</mat-label>
        <input matInput formControlName="parcelLandUse" placeholder="" type="parcelLandUse">
      </mat-form-field>

      <mat-form-field>
        <mat-label>Choose a date</mat-label>
        <input matInput [matDatepicker]="create" matInput formControlName="parcelDateCreate" type="parcelDateCreate" style="display: inline;" placeholder="MM/DD/YYYY">
        <mat-datepicker-toggle matIconSuffix [for]="create"></mat-datepicker-toggle>
        <mat-datepicker #create></mat-datepicker>
      </mat-form-field>

      <mat-form-field>
        <mat-label>Choose a date</mat-label>
        <input matInput [matDatepicker]="update" matInput formControlName="parcelUpdateAt" type="parcelUpdateAt" style="display: inline;" placeholder="MM/DD/YYYY">
        <mat-datepicker-toggle matIconSuffix [for]="update"></mat-datepicker-toggle>
        <mat-datepicker #update></mat-datepicker>
      </mat-form-field>

      @if (selectedState === 'save') {
        <button mat-raised-button color="accent" type="submit">Save</button>
      }@else {
        <button mat-raised-button color="primary" (click)="updateParcel()">Update</button>
        <button mat-raised-button color="button" (click)="resetFormParcel()">reset Form</button>
      }
    </form>

    <section>
      <ng-container>
        <div>

          <table class="table">
            <thead>
              <tr>
                <th scope="col">Code</th>
                <th scope="col">Municipality</th>
                <th scope="col">Owner</th>
                <th scope="col">Area</th>
                <th scope="col">Land Use</th>
                <th scope="col">Data Create</th>
                <th scope="col">Date Update</th>
                <th scope="col">Geom</th>
              </tr>
            </thead>

            @for (value of data; track value) {
              <tr>
                <td>
                  <button type="button" class="btn btn-light" (click)="getRecord(value.code)">{{value.code}}</button>
                </td>
                <th scope="row">{{$index+1}}</th>
                <td style="color: gray;">{{value.municipality}}</td>
                <td style="color: gray;">{{value.party_owner}}</td>
                <td style="color: gray;">{{value.area}}</td>
                <td style="color: gray;">{{value.land_use}}</td>
                <td style="color: gray;">{{value.date_create}}</td>
                <td style="color: gray;">{{value.update_at}}</td>
                <td>
                  <button type="button" class="btn btn-light" (click)="showGeom(value.geom)">Show</button>
                </td>
              </tr>
            }
          </table>

        </div>
      </ng-container>

    </section>
  }

</div>

<br><br>

<section>
  <div class="container">
    <app-tables></app-tables>
  </div>
</section>
